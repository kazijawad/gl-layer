<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>gl-layer / Triangle</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <script type="module">
        import { Renderer, Program, Clock } from '../src/index.js';

        const clock = new Clock();

        const renderer = new Renderer({
            width: window.innerWidth,
            height: window.innerHeight,
        });

        const gl = renderer.gl;

        const program = new Program({
            gl,
            attributes: {
                position: [-0.25, -0.25, 0, 0.50, 0.25, -0.25],
            },
            uniforms: {
                uColor: [1.0, 1.0, 1.0],
                uTime: clock.time,
            },
            vertex: `
                attribute vec4 position;

                void main() {
                    gl_Position = position;
                }
            `,
            fragment: `
                precision mediump float;

                uniform vec3 uColor;
                uniform float uTime;

                void main() {
                    gl_FragColor = vec4(vec3(sin(uTime), 0.5, cos(uTime)) * uColor, 1.0);
                }
            `,
        });

        addEventListener('resize', handleResize);

        render();

        function handleResize() {
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function render() {
            program.setUniforms({ uTime: clock.time });
            renderer.render({ program, count: 3 });
            requestAnimationFrame(render);
        }
    </script>
</body>
</html>
